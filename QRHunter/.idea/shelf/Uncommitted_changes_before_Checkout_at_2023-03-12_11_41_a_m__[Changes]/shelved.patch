Index: app/src/main/java/com/example/qrhunter/ui/login/PlayerInitialization.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.qrhunter.ui.login;\r\n\r\nimport static android.content.ContentValues.TAG;\r\n\r\nimport androidx.lifecycle.ViewModelProvider;\r\n\r\nimport android.annotation.SuppressLint;\r\nimport android.graphics.PorterDuff;\r\nimport android.graphics.drawable.Drawable;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.provider.Settings;\r\nimport android.text.Editable;\r\nimport android.text.TextWatcher;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.EditText;\r\n\r\nimport com.example.qrhunter.R;\r\nimport com.example.qrhunter.data.model.Player;\r\nimport com.example.qrhunter.data.repository.UserRepository;\r\nimport com.example.qrhunter.databinding.FragmentPlayerInitializationBinding;\r\nimport com.example.qrhunter.ui.profile.ProfileFragment;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.Source;\r\n\r\npublic class PlayerInitialization extends Fragment {\r\n\r\n    private FragmentPlayerInitializationBinding binding;\r\n    private String deviceId;\r\n    private String usernameInput;\r\n\r\n    private FirebaseFirestore db;\r\n\r\n\r\n    @Override\r\n    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container,\r\n                             @Nullable Bundle savedInstanceState) {\r\n        //Get ViewModel\r\n        PlayerInitializationViewModel playerInitializationViewModel = new ViewModelProvider(this).get(PlayerInitializationViewModel.class);\r\n        binding = FragmentPlayerInitializationBinding.inflate(inflater, container, false);\r\n\r\n        deviceId = Settings.Secure.getString(getContext().getContentResolver(), Settings.Secure.ANDROID_ID);\r\n        db = FirebaseFirestore.getInstance();\r\n\r\n        //Get username from database\r\n        UserRepository userRepository = new UserRepository();\r\n        db.collection(\"users\").document(deviceId).get().addOnSuccessListener(\r\n                documentSnapshot -> {\r\n                    if (!documentSnapshot.exists()) {\r\n                        binding.username.addTextChangedListener(new TextWatcher() {\r\n                            @Override\r\n                            public void beforeTextChanged(CharSequence s, int start, int count, int after) {\r\n                                // Add delete text button\r\n                            }\r\n\r\n                            @SuppressLint({\"UseCompatLoadingForDrawables\", \"SetTextI18n\"})\r\n                            @Override\r\n                            public void onTextChanged(CharSequence s, int start, int before, int count) {\r\n                                // Add delete text button\r\n                                usernameInput = s.toString();\r\n                                if (usernameInput.length() > 0) {\r\n                                    binding.button.setTextColor(getResources().getColor(R.color.white));\r\n                                    binding.button.setBackgroundColor(getResources().getColor(R.color.primary_dark));\r\n                                    binding.button.setEnabled(true);\r\n                                } else {\r\n                                    binding.button.setTextColor(getResources().getColor(R.color.primary_dark));\r\n                                    binding.button.setBackgroundColor(getResources().getColor(R.color.primary_lighter));\r\n                                    binding.button.setEnabled(false);\r\n                                }\r\n                                if (userRepository.doesUsernameExist(usernameInput)) {\r\n                                    binding.button.setTextColor(getResources().getColor(R.color.primary_dark));\r\n                                    binding.button.setBackgroundColor(getResources().getColor(R.color.primary_lighter));\r\n                                    binding.button.setEnabled(false);\r\n                                    binding.username.setBackground(getResources().getDrawable(R.drawable.error_field));\r\n                                    binding.supportingText.setText(R.string.error_supporting_text);\r\n                                    binding.supportingText.setTextColor(getResources().getColor(R.color.error));\r\n                                    binding.imageButton2.setBackground(getResources().getDrawable(R.drawable.error));\r\n                                }\r\n                                else if(!userRepository.doesUsernameExist(usernameInput)){\r\n                                    binding.button.setTextColor(getResources().getColor(R.color.white));\r\n                                    binding.button.setBackgroundColor(getResources().getColor(R.color.primary_dark));\r\n                                    binding.button.setEnabled(true);\r\n                                    binding.username.setBackground(getResources().getDrawable(R.drawable.username_text_field));\r\n                                    binding.supportingText.setText(R.string.supporting_text);\r\n                                    binding.supportingText.setTextColor(getResources().getColor(R.color.primary_dark));\r\n                                    binding.imageButton2.setBackground(getResources().getDrawable(R.drawable.cancel_icon));\r\n                                    binding.button.setOnClickListener(new View.OnClickListener() {\r\n                                        @Override\r\n                                        public void onClick(View v) {\r\n                                            playerInitializationViewModel.initializePlayer(usernameInput.trim(), deviceId);\r\n                                            getActivity().getSupportFragmentManager().beginTransaction().replace(R.id.nav_host_fragment, new ProfileFragment()).commit();\r\n                                        }\r\n                                    });\r\n                                }\r\n\r\n                            }\r\n\r\n                            @Override\r\n                            public void afterTextChanged(Editable s) {\r\n                                // Add delete text button\r\n\r\n                            }\r\n                        });\r\n                    }\r\n                    else {\r\n                        getActivity().getSupportFragmentManager().beginTransaction().replace(R.id.nav_host_fragment, new ProfileFragment()).commit();\r\n                    }\r\n                }\r\n        );\r\n\r\n\r\n\r\n\r\n\r\n        return binding.getRoot();\r\n\r\n    }\r\n}
===================================================================
diff --git a/app/src/main/java/com/example/qrhunter/ui/login/PlayerInitialization.java b/app/src/main/java/com/example/qrhunter/ui/login/PlayerInitialization.java
--- a/app/src/main/java/com/example/qrhunter/ui/login/PlayerInitialization.java	
+++ b/app/src/main/java/com/example/qrhunter/ui/login/PlayerInitialization.java	
@@ -53,7 +53,10 @@
         UserRepository userRepository = new UserRepository();
         db.collection("users").document(deviceId).get().addOnSuccessListener(
                 documentSnapshot -> {
-                    if (!documentSnapshot.exists()) {
+                    if (documentSnapshot.exists()) {
+                        getActivity().getSupportFragmentManager().beginTransaction().replace(R.id.nav_host_fragment, new ProfileFragment()).commit();
+                    }
+                    else {
                         binding.username.addTextChangedListener(new TextWatcher() {
                             @Override
                             public void beforeTextChanged(CharSequence s, int start, int count, int after) {
@@ -109,9 +112,6 @@
                             }
                         });
                     }
-                    else {
-                        getActivity().getSupportFragmentManager().beginTransaction().replace(R.id.nav_host_fragment, new ProfileFragment()).commit();
-                    }
                 }
         );
 
